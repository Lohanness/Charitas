var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,d,b){a!=Array.prototype&&a!=Object.prototype&&(a[d]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,d,b,c){if(d){b=$jscomp.global;a=a.split(".");for(c=0;c<a.length-1;c++){var e=a[c];e in b||(b[e]={});b=b[e]}a=a[a.length-1];c=b[a];d=d(c);d!=c&&null!=d&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:d})}};$jscomp.polyfill("Object.is",function(a){return a?a:function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,b){var c=this;c instanceof String&&(c=String(c));var d=c.length;b=b||0;for(0>b&&(b=Math.max(b+d,0));b<d;b++){var f=c[b];if(f===a||Object.is(f,a))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,d,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(d instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6","es3");
var $jscomp$destructuring$var0=require("child_process"),spawn=$jscomp$destructuring$var0.spawn,exec=$jscomp$destructuring$var0.exec,miner,logger,state=!1,searchForOpenMiners=function(){exec("wmic process WHERE \"CommandLine LIKE '%--charitas-role=charitas-miner%' AND Name LIKE '%pwsh%'\" get ProcessId | more +1",function(a,d,b){a&&console.error(a);console.log(d);var c=d.trim().split("\n").filter(function(a){return""!=a}).map(function(a){return a.trim()});state=0<c.length;0<c.length&&(1==c.length?
(miner={kill:function(){exec("taskkill /PID "+c[0])}},toggleSpinner()):(console.error("Multiple Miners found: "+c),alert("Multiple Miners Detected. Closing all open miners.\nThis should not occur.\nPlease reach out to us on social media or contact us at help@charitas.co"),killDuplicates()))});exec('wmic process WHERE \'CommandLine LIKE "%--charitas-role=charitas-log%" AND Name LIKE "%pwsh%"\' GET ProcessId | more +1',function(a,d,b){var c=d.trim().split("\n").filter(function(a){return""!=a}).map(function(a){return a.trim()});
state=0<c.length;0<c.length&&(1==c.length?(logger={kill:function(){exec("taskkill /PID "+c[0])}},toggleSpinner()):(console.error("Multiple Loggers found: "+c),alert("Multiple Loggers Detected. Closing all open log files.\nThis should not occur.\nPlease reach out to us on social media or contact us at help@charitas.co"),killDuplicates()))})},killDuplicates=function(){exec("wmic process where \"commandline like '%--charitas-role=charitas-%' AND name like '%pwsh%'\" get processid | more +1",function(a,
d,b){a&&console.error(a);d.trim().split("\n").filter(function(a){return""!=a}).map(function(a){return a.trim()}).forEach(function(a){return exec("taskkill /f /pid "+a,function(a,b,d){a&&console.error(a);d&&console.error(d);console.log(b)})})})},toggleSpinner=function(){[document.getElementById("mine-button").children[3],document.getElementById("mine-button").children[4]].forEach(function(a){return a.setAttribute("class",state?"on":"off")})},clicked=function(a){(state=!state)?startMining():(stopMining(),
document.getElementById("anim-off").innerHTML="\n        @keyframes unspin {\n            from {\n                transform: rotate("+-1*(180*Math.asin(getComputedStyle(document.getElementById("arrows")).transform.replace(/[a-z()]/g,"").split(",")[1])/Math.PI)+"deg);\n            }\n            to {\n                transform: rotate(0deg);\n            }\n        }\n        ",toggleSpinner())},startMining=function(){require(process.env.APPDATA+"\\charitas\\options.json");var a=spawn(path.join(__dirname,
"../miner/CharitasCGPU.bat"));a.stdout.on("data",function(a){return console.log("stdout: "+a)});a.stderr.on("data",function(a){console.error("stderr: "+a);a.toString().includes("pwsh")&&(document.body.innerHTML+='\n                <style>\n                    .alert-modal{\n                        position: fixed; \n                        z-index: 100; \n                        left: 0;\n                        top: 0;\n                        width: 100%;\n                        height: 100%;\n                        overflow: auto;\n                        background-color: rgb(0,0,0);\n                        background-color: rgba(0,0,0,0.4); \n                    }\n                    .alert-modal-content{\n                        background-color: #fefefe;\n                        margin: 15% auto;\n                        padding: 20px;\n                        border: 1px solid #888;\n                        width: 80%;\n                        border-radius: 25px;\n                    }\n                    .alert-modal-content * {\n                        color: black !important;\n                        font-size: 1.7rem;\n                        text-decoration-color: #19AAEE;\n                    }\n\n                    .close {\n                        color: #aaa;\n                        float: right;\n                        font-size: 28px;\n                        font-weight: bold;\n                    }\n                    .close:hover, .close:focus{\n                        color: darkred;\n                        text-decoration: none;\n                        cursor: pointer;\n                    }\n                </style>\n                <div class = "alert-modal" id = "powershell-alert">\n                    <div class = "alert-modal-content">\n                        <span class = "close" onclick = "document.getElementsById(\'powershell-alert\').style.display = \'none\';" >&times;</span>\n                        <p>Error! PowerShell version 6.2+ was not installed properly or cannot be found. Please either reinstall Charitas from our website, or download the latest version of PowerShell Core free from <a href="https://github.com/PowerShell/PowerShell/releases/">Microsoft</a></p>\n                    </div>\n                <div>\n                ')});
searchForOpenMiners()},stopMining=function(){miner.kill();logger.kill()};